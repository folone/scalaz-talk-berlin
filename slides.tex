\documentclass{beamer}
\usepackage{fontspec} 
\usepackage{listings}
\usepackage[utf8]{inputenc}
\usepackage{fontspec}
\usepackage{minted}
\setsansfont{Calibri}
\setmonofont{Consolas}
\usetheme{CambridgeUS}
\title[Scalaz]{Scalaz\\Learn You Yet Another Real World Gentle Haskell (LYYARWGH) ((c) sproingie)}
\author{George Leontiev}
\institute{deltamethod GmbH}
\date{April 18, 2013}

\begin{document}

\begin{frame}
\titlepage
\centerline{($\lambda$x.folonexlambda-calcul.us)@}
\centerline{folone.info}
\end{frame}

\begin{frame}{Agenda}
  \begin{itemize}
    \item Some hotness without context, to draw attention (Option, Boolean, Memo)
    \item Typeclasses
    \item Monoid
    \item Effects
    \item scalaz 6 vs seven
    \item typelevel.org
  \end{itemize}
\end{frame}

\begin{frame}{What is scalaz}
  \begin{itemize}
    \item Purely functional datatypes (Fingertree, HList, DList, Trees, Zippers, Nel, ImmutableArray)
    \item Typeclasses
    \item Effects
    \item Concurrency
  \end{itemize}
\end{frame}

\begin{frame}[fragile]{Examples -- typesafe equals}
  \begin{minted}[mathescape,
               numbersep=5pt,
               gobble=2,
               framesep=2mm]{scala}
  s> "" == 5
  res0: Boolean = false

  s> "" === 5
  <console>:14: error: type mismatch;
   found   : Int(5)
   required: java.lang.String
             "" === 5
                    ^
  \end{minted}
  <spoiler>$\forall$ stuff $\in$ scalaz $\equiv$ scala.stdlib | stuff is typesafe $\vee$ stuff is strict</spoiler>
\end{frame}

\begin{frame}[fragile]{Examples -- options}
  \begin{minted}[mathescape,
               numbersep=5pt,
               gobble=2,
               framesep=2mm]{scala}
  s> some(5) getOrElse 0
  res1: Int = 5
  s> some(5) | 0
  res2: Int = 5
  s> some(1) getOrElse "ok"
  res3: Any = 1
  s> some(1) | "ok"
  <console>:14: error: type mismatch;
   found   : java.lang.String("ok")
   required: Int
            some(1) | "ok"
                      ^
  s> ~some(5) // Monoids
  res4: Int = 5
  s> ~none[Int] // NB: Beware of unary_~ on Validations
  res5: Int = 0
  \end{minted}
\end{frame}

\begin{frame}[fragile]{Examples -- options II}
  \begin{minted}[mathescape,
               numbersep=5pt,
               gobble=2,
               framesep=2mm]{scala}
  // Smart constructors
  s> :t Some(1)        s> :t None
  Some[Int]            None.type
  s> :t some(1)        s> :t none[Int]
  Option[Int]          Option[Int]

  s> List(Some(1),None).foldLeft(None){(_, v) => v}
  <console>:14: error: type mismatch;
   found   : v.type (with underlying type Option[Int])
   required: None.type
     List(Some(1),None).foldLeft(None){(_, v) => v}
                                                 ^
  s> List(Some(1),None).foldLeft(none[Int]){(_, v) => v}
  res11: Option[Int] = None
  \end{minted}
\end{frame}

\begin{frame}[fragile]{Examples -- booleans}
  \begin{minted}[mathescape,
               numbersep=5pt,
               gobble=2,
               framesep=2mm]{scala}
  scala> true ? println("true") | println("false")
  true

  scala> true ?? 5        scala> true !? 5
  res14: Int = 5          res15: Int = 0

  scala> false ?? 5       scala> false !? 5
  res15: Int = 0          res17: Int = 5
  \end{minted}
\end{frame}

\begin{frame}[fragile]{Examples -- function composition}
  \begin{minted}[mathescape,
               numbersep=5pt,
               gobble=2,
               framesep=2mm]{scala}
  val a = (_:Int) + 6
  val b = (_:Int).toString
  val c = (_:String).length

  scala> 5 |> a |> b |> c
  res18: Int = 2

  scala> //(c $\cdot$ b $\cdot$ a) apply 5 // contramap
  res19: Int = 2

  scala> 5 |> //(a $\circ$ b $\circ$ c) // map
  res20: Int = 2

  // contramap === flip . map
  \end{minted}
\end{frame}

\begin{frame}[fragile]{Examples -- Memo}
  \begin{minted}[mathescape,
               numbersep=5pt,
               gobble=2,
               framesep=2mm]{scala}
  def func(s: String) = // Expensive computation
  scala> Memo.immutableHashMapMemo(func)
  res11: String => java.lang.String = <function1>

  // Different strategies
  mutableHashMapMemo
  arrayMemo // sized
  immutableListMemo
  immutableTreeMapMemo
  doubleArrayMemo // memoizing Double results != sentinel
  weakHashMapMemo // GC
  \end{minted}
\end{frame}

\begin{frame}[fragile]{Examples -- Trampoline}
  \begin{minted}[mathescape,
               numbersep=5pt,
               gobble=2,
               framesep=2mm]{scala}
  def fibRec(n: Int): Int =
    if (n < 2) n else fibRec(n - 1) + fibRec(n - 2)

  def fibTramp(n: Int): Trampoline[Int] =
    if (n < 2) done(n) else suspend {
      for {
        i <- fibTramp(n - 1)
        j <- fibTramp(n - 2)
      } yield i + j
    }
  \end{minted}
\end{frame}

\begin{frame}[fragile]{Typeclasses}
  TODO
\end{frame}

\begin{frame}[fragile]{Monoids}
  TODO
\end{frame}

\begin{frame}[fragile]{Functors}
  TODO
\end{frame}

\begin{frame}[fragile]{Applicatives}
  TODO
\end{frame}

\begin{frame}[fragile]{Monads}
  TODO
\end{frame}

\begin{frame}[fragile]{IO}
  TODO
\end{frame}

\end{document}
